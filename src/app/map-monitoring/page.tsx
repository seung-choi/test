"use client";

import styles from "@/styles/pages/map-monitoring/mapMonitoring.module.scss";
import { useRef, useState } from "react";
import { useCourseMapConfig } from "@/hooks/useCourseMapConfig";
import { gpsToPx } from "@/utils/pg";

const coordinatesList = [
  [36.70108, 126.32054],
  [36.69833160011784, 126.32293882831758],
  [36.7014571447499, 126.31954862327925],
  [36.69831, 126.31607],
  [36.69951, 126.31525],
  [36.69777563719096, 126.31553584421869],
  [36.70172, 126.31889],
  [36.70021677976498, 126.31538551009179],
  [36.70071, 126.31521],
  [36.70213077968852, 126.31877052328431],
  [36.70275, 126.31617],
  [36.70022854071224, 126.31468879882578],
  [36.70343, 126.3211],
  [36.70292979247782, 126.31667917277055],
  [36.70228, 126.32044],
  [36.70311716814238, 126.32187008929198],
  [36.69929, 126.32308],
  [36.70180875270563, 126.3199735683579],
  [36.70041, 126.31999],
  [36.69785287837337, 126.32254158057873],
  [36.69745, 126.31618],
  [36.70114774838711, 126.31980873457547],
  [36.69376, 126.31813],
  [36.69681339600182, 126.31587447931109],
  [36.69664, 126.3167],
  [36.69372049526859, 126.31904614173108],
  [36.69833, 126.31777],
  [36.69686290977832, 126.31704339414657],
  [36.69442, 126.31934],
  [36.69909872641709, 126.31840841636435],
  [36.6965, 126.32048],
  [36.69470483269537, 126.31981234577651],
  [36.69947, 126.31898],
  [36.69686067116641, 126.32137953426101],
  [36.69746, 126.32199],
  [36.70007263602308, 126.3193202323931],
  [36.69282, 126.32246],
  [36.696103884731876, 126.3237808204713],
  [36.68882, 126.32409],
  [36.69208347585422, 126.32233624441047],
  [36.68746, 126.32609],
  [36.68848072468545, 126.32461680252085],
  [36.68649, 126.33072],
  [36.686715086782435, 126.32590493682306],
  [36.68306, 126.32944],
  [36.686108443514875, 126.33138417373787],
  [36.68616, 126.32615],
  [36.68342212549736, 126.32880340869383],
  [36.68778, 126.32443],
  [36.68631487568911, 126.32564550085976],
  [36.69247, 126.32106],
  [36.688279423993905, 126.32368150529358],
  [36.69619, 126.32304],
  [36.69327034759218, 126.3206949632845],
  [36.69142, 126.32358],
  [36.69606159497289, 126.32426795043399],
  [36.68828, 126.32623],
  [36.69118828622057, 126.32417073196311],
  [36.68706, 126.33023],
  [36.68780360516503, 126.32677654471658],
  [36.68789, 126.32777],
  [36.6877016487026, 126.3298683026107],
  [36.69049, 126.32513],
  [36.687943484244286, 126.32721168473164],
  [36.68818, 126.3295],
  [36.69106301011373, 126.32512010890906],
  [36.6913, 126.32765],
  [36.68849632165874, 126.32976909977914],
  [36.69157, 126.32477],
  [36.69171011910826, 126.32720963980357],
  [36.69557, 126.32476],
  [36.69188726360402, 126.32427930462552],
];

const MapMonitoring = () => {
  const [isLoaded, setIsLoaded] = useState(false);

  const imgRef = useRef<HTMLImageElement | null>(null);

  const { config } = useCourseMapConfig({ imgRef });

  return (
    <section className={styles["section"]}>
      <img
        className={styles["holeImg"]}
        src="/assets/image/solLago-map.jpg"
        alt=""
        ref={imgRef}
        onLoad={() => setIsLoaded(true)}
      />
      {isLoaded &&
        coordinatesList.map((coordinate) => {
          const [latitude, longitude] = coordinate;
          const { x, y } = gpsToPx({ latitude: latitude, longitude: longitude }, config);

          return (
            <div
              key={`marker-${latitude}-${longitude}`}
              className={styles["marker"]}
              style={{ left: x, top: y }}
            ></div>
          );
        })}
    </section>
  );
};

export default MapMonitoring;
